# ğŸµ Melody Challenger é¡¹ç›®å¼€å‘æ—¥å¿—

## é¡¹ç›®æ¦‚è¿°
**é¡¹ç›®åç§°**: Melody Challenger (éŸ³é«˜å¤§å¸ˆ / PitchMaster)  
**åŸŸå**: www.melodychallenger.com  
**éƒ¨ç½²å¹³å°**: Vercel (è‡ªåŠ¨éƒ¨ç½²)  
**ä»“åº“**: https://github.com/wangroupai01-png/test4-pitch-tool.git  

## æŠ€æœ¯æ ˆ
- **æ¡†æ¶**: React 18 + TypeScript
- **æ„å»ºå·¥å…·**: Vite
- **æ ·å¼**: Tailwind CSS (Neo-Brutalism é£æ ¼)
- **åŠ¨ç”»**: Framer Motion
- **è·¯ç”±**: React Router DOM
- **éŸ³é¢‘**: Web Audio API + Salamander Grand Piano é‡‡æ ·
- **éŸ³é«˜æ£€æµ‹**: Pitchfinder (YIN ç®—æ³•)
- **ç‰¹æ•ˆ**: canvas-confetti
- **åç«¯**: Supabase (è®¤è¯ + æ•°æ®åº“)
- **çŠ¶æ€ç®¡ç†**: Zustand (å¸¦æŒä¹…åŒ–)

---

## å…³é”®å¼€å‘èŠ‚ç‚¹

### 2026-01-26: Phase 4 - æ™ºèƒ½å­¦ä¹ ç³»ç»Ÿ (v2.2)

#### æ–°å¢åŠŸèƒ½

**1. é—´éš”é‡å¤å¤ä¹ ç³»ç»Ÿ**
- åŸºäº SM-2 ç®—æ³•çš„æ™ºèƒ½å¤ä¹ è°ƒåº¦
- æ ¹æ®ç”¨æˆ·è¡¨ç°è‡ªåŠ¨è®¡ç®—ä¸‹æ¬¡å¤ä¹ æ—¶é—´
- éš¾åº¦å› å­è‡ªé€‚åº”è°ƒæ•´ (1.3 - 2.5)

**ç›¸å…³æ–‡ä»¶**:
- `src/utils/spacedRepetition.ts` - SM-2 ç®—æ³•å®ç°
- `src/utils/reviewService.ts` - å¤ä¹ æœåŠ¡ï¼ˆæ•°æ®åº“æ“ä½œï¼‰
- `src/lib/add-review-system.sql` - å¤ä¹ ç³»ç»Ÿæ•°æ®è¡¨

**2. å¤ä¹ ä¸­å¿ƒé¡µé¢**
- é¡µé¢è·¯ç”± `/review`
- æ˜¾ç¤ºå¾…å¤ä¹ è¯¾ç¨‹åˆ—è¡¨ï¼ˆæŒ‰ä¼˜å…ˆçº§æ’åºï¼‰
- ç»Ÿè®¡å¡ç‰‡ï¼šå·²è¿‡æœŸã€ä»Šæ—¥å¾…å¤ä¹ ã€å³å°†å¤ä¹ ã€å·²æŒæ¡
- ä¸€é”®å¼€å§‹å¤ä¹ åŠŸèƒ½

**ç›¸å…³æ–‡ä»¶**:
- `src/pages/Review.tsx` - å¤ä¹ ä¸­å¿ƒé¡µé¢

**3. è‡ªåŠ¨æ·»åŠ å¤ä¹ è®¡åˆ’**
- å®Œæˆè¯¾ç¨‹åè‡ªåŠ¨åˆ›å»º/æ›´æ–°å¤ä¹ è®¡åˆ’
- æ ¹æ®å¾—åˆ†è®¡ç®—è´¨é‡è¯„åˆ† (0-5)
- è‡ªåŠ¨è®¡ç®—ä¸‹æ¬¡å¤ä¹ æ—¥æœŸ

**4. è–„å¼±ç‚¹åˆ†æ**
- è®°å½•æ¯é“é¢˜çš„ç­”é¢˜ç»Ÿè®¡
- åˆ†ææ­£ç¡®ç‡ä½äº 70% çš„è–„å¼±ç‚¹
- åœ¨å¤ä¹ ä¸­å¿ƒæ˜¾ç¤ºè–„å¼±ç‚¹åˆ—è¡¨

**5. å­¦ä¹ é¡µé¢å¤ä¹ å…¥å£**
- æœ‰å¾…å¤ä¹ å†…å®¹æ—¶æ˜¾ç¤ºé†’ç›®å…¥å£å¡ç‰‡
- æ˜¾ç¤ºå¾…å¤ä¹ æ•°é‡

#### æ•°æ®åº“æ›´æ–°
éœ€è¦è¿è¡Œä»¥ä¸‹ SQL è„šæœ¬ï¼š
- `src/lib/add-review-system.sql` - å¤ä¹ ç³»ç»Ÿè¡¨å’Œè–„å¼±ç‚¹ç»Ÿè®¡è¡¨

---

### 2026-01-25: Phase 2 - æ¿€åŠ±ç³»ç»Ÿ (v2.1)

#### æ–°å¢åŠŸèƒ½

**1. æˆå°±ç³»ç»Ÿæ‰©å±•**
- 17ç§æˆå°±ï¼ŒæŒ‰ç±»å‹åˆ†ç»„ï¼šå­¦ä¹ æˆå°±ã€æŠ€èƒ½æˆå°±ã€æ‰“å¡æˆå°±ã€ç­‰çº§æˆå°±ã€ç»éªŒæˆå°±
- æˆå°±è§£é”æ—¶æ˜¾ç¤ºå…¨å±€å¼¹çª— `AchievementToast`
- æˆå°±é¡µé¢ `/achievements`ï¼šå±•ç¤ºæ‰€æœ‰æˆå°±å’Œè§£é”è¿›åº¦
- è‡ªåŠ¨æ£€æµ‹æˆå°±è§£é”æ¡ä»¶

**ç›¸å…³æ–‡ä»¶**:
- `src/components/game/AchievementToast.tsx` - æˆå°±å¼¹çª—
- `src/pages/Achievements.tsx` - æˆå°±å±•ç¤ºé¡µ
- `src/utils/achievementChecker.ts` - æˆå°±æ£€æµ‹é€»è¾‘
- `src/lib/add-achievements-data.sql` - æˆå°±æ•°æ® SQL

**2. è¿ç»­æ‰“å¡è¿½è¸ª**
- å®Œæˆè¯¾ç¨‹æ—¶è‡ªåŠ¨æ›´æ–°æ‰“å¡è®°å½•
- è®¡ç®—è¿ç»­å¤©æ•°å’Œæœ€é•¿è¿ç»­å¤©æ•°
- æ‰“å¡è®°å½•å­˜å‚¨åœ¨ `user_streaks` è¡¨

**3. æ¯æ—¥æŒ‘æˆ˜å®Œæ•´å®ç°**
- é¡µé¢è·¯ç”± `/daily-challenge`
- æ¯æ—¥ç”Ÿæˆéšæœºé¢˜ç›®ï¼ˆæ ¹æ®æ˜ŸæœŸå‡ å˜åŒ–éš¾åº¦ï¼‰
- å®Œæˆåå¥–åŠ± 50 XP
- åˆ†æ•°ä¿å­˜åœ¨ `daily_challenge_scores` è¡¨

**ç›¸å…³æ–‡ä»¶**:
- `src/pages/DailyChallenge.tsx` - æ¯æ—¥æŒ‘æˆ˜é¡µ
- `src/lib/add-daily-challenge-table.sql` - æ¯æ—¥æŒ‘æˆ˜æ•°æ®è¡¨

**4. å‡çº§åŠ¨æ•ˆ**
- å‡çº§æ—¶è§¦å‘å…¨å±åŠ¨ç”» + æ’’èŠ±ç‰¹æ•ˆ
- ä½¿ç”¨ `canvas-confetti` å®ç°

**ç›¸å…³æ–‡ä»¶**:
- `src/components/game/LevelUpToast.tsx` - å‡çº§åŠ¨ç”»

**5. éŸ³ç¨‹è¯¾ç¨‹æ”¯æŒ**
- è¯¾ç¨‹é¡µé¢æ”¯æŒéŸ³ç¨‹ç±»å‹é¢˜ç›®
- æ’­æ”¾ä¸¤ä¸ªéŸ³ç¬¦ï¼ˆåŸºç¡€éŸ³ + éŸ³ç¨‹éŸ³ï¼‰
- é€‰é¡¹ä¸ºéŸ³ç¨‹åç§°ï¼ˆå¦‚"å¤§äºŒåº¦"ã€"çº¯äº”åº¦"ï¼‰

**6. UI ä¼˜åŒ–**
- æŠ€èƒ½è¯¦æƒ…é¡µæ·»åŠ ã€Œæ›´å¤šè¯¾ç¨‹æ•¬è¯·æœŸå¾…ã€å¡ç‰‡
- ä¿®å¤å·²å®Œæˆè¯¾ç¨‹å¡ç‰‡é€æ˜åº¦é—®é¢˜
- å¢åŠ åº•éƒ¨å¯¼èˆªæ ä¸å†…å®¹åŒºé—´è·

#### æ•°æ®åº“æ›´æ–°
éœ€è¦è¿è¡Œä»¥ä¸‹ SQL è„šæœ¬ï¼š
- `src/lib/add-interval-lessons.sql` - éŸ³ç¨‹åŸºç¡€ 5 èŠ‚è¯¾ç¨‹
- `src/lib/add-achievements-data.sql` - æˆå°±æ•°æ®
- `src/lib/add-daily-challenge-table.sql` - æ¯æ—¥æŒ‘æˆ˜è¡¨

---

### 2026-01-23: Phase 1 - å­¦ä¹ ç³»ç»Ÿé‡æ„ (v2.0 å¼€å‘ä¸­)

#### æ–°å¢åŠŸèƒ½

**1. åº•éƒ¨ Tab å¯¼èˆªå¸ƒå±€**
- å››ä¸ªä¸» Tabï¼šå­¦ä¹ ã€ç»ƒä¹ ã€ç«æŠ€ã€æˆ‘çš„
- å…¥å£ `/` é‡å®šå‘åˆ° `/learn`
- åŸæœ‰é¡µé¢ï¼ˆFreeModeã€QuizModeã€SingModeï¼‰ä¿æŒå…¨å±æ¨¡å¼

**ç›¸å…³æ–‡ä»¶**:
- `src/components/layout/TabLayout.tsx`
- `src/App.tsx` (è·¯ç”±é‡æ„)

**2. æŠ€èƒ½æ ‘ç³»ç»Ÿ**
- æŒ‰ç±»åˆ«åˆ†ç»„ï¼šåŸºç¡€ç¯‡ã€è¿›é˜¶ç¯‡ã€ä¸“ä¸šç¯‡
- æŠ€èƒ½è¿›åº¦æ˜¾ç¤ºã€å‰ç½®æŠ€èƒ½è§£é”é€»è¾‘
- è¯¾ç¨‹åˆ—è¡¨ã€æ˜Ÿçº§è¯„ä»·

**ç›¸å…³æ–‡ä»¶**:
- `src/pages/Learn.tsx` - å­¦ä¹ ä¸­å¿ƒ
- `src/pages/SkillDetail.tsx` - æŠ€èƒ½è¯¦æƒ…é¡µ
- `src/pages/LessonPage.tsx` - è¯¾ç¨‹å­¦ä¹ é¡µ

**3. è¯¾ç¨‹å­¦ä¹ æµç¨‹**
- æ’­æ”¾ç›®æ ‡éŸ³ â†’ é€‰æ‹©ç­”æ¡ˆ â†’ åé¦ˆ â†’ è¿›å…¥ä¸‹ä¸€é¢˜
- å®Œæˆåæ˜¾ç¤ºå¾—åˆ†å’Œæ˜Ÿçº§
- è‡ªåŠ¨è§£é”ä¸‹ä¸€è¯¾ç¨‹

**4. XP ç»éªŒå€¼ç³»ç»Ÿ**
- å®Œæˆè¯¾ç¨‹è·å¾— XP
- å®ŒæˆæŠ€èƒ½è·å¾—é¢å¤– XP
- ç­‰çº§è¿›åº¦æ¡æ˜¾ç¤ºåœ¨ Tab å¯¼èˆªä¸Šæ–¹
- ç­‰çº§é…ç½®è¡¨ (1-50çº§)

**ç›¸å…³æ–‡ä»¶**:
- `src/components/game/XPBar.tsx`
- `src/lib/supabase-schema-v2.sql` (æ•°æ®åº“æ‰©å±•)

**5. ç«æŠ€åœºé¡µé¢**
- æ¯æ—¥æŒ‘æˆ˜å…¥å£ (æŒ‰æ˜ŸæœŸæ˜¾ç¤ºä¸åŒç±»å‹)
- æ’è¡Œæ¦œå…¥å£
- è”èµ›ç³»ç»Ÿ / å¥½å‹PK (å³å°†ä¸Šçº¿å ä½)

**ç›¸å…³æ–‡ä»¶**:
- `src/pages/Compete.tsx`

**6. ä¸ªäººä¸­å¿ƒé¡µé¢**
- ç”¨æˆ·å¤´åƒã€ç­‰çº§ã€XP æ˜¾ç¤º
- ç»Ÿè®¡æ•°æ®ï¼šè¿ç»­æ‰“å¡ã€å®ŒæˆæŠ€èƒ½ã€å®Œæˆè¯¾ç¨‹ã€è§£é”æˆå°±
- é€€å‡ºç™»å½•

**ç›¸å…³æ–‡ä»¶**:
- `src/pages/Profile.tsx`

**7. æ•°æ®åº“æ‰©å±• Schema**
- `skills` - æŠ€èƒ½å®šä¹‰
- `lessons` - è¯¾ç¨‹å†…å®¹ (JSONB å­˜å‚¨é¢˜ç›®é…ç½®)
- `user_skill_progress` - ç”¨æˆ·æŠ€èƒ½è¿›åº¦
- `user_lesson_progress` - ç”¨æˆ·è¯¾ç¨‹è¿›åº¦
- `user_xp` - ç”¨æˆ·ç»éªŒå€¼å’Œç­‰çº§
- `xp_logs` - XP è·å–è®°å½•
- `level_config` - ç­‰çº§é…ç½®
- `user_streaks` - æ‰“å¡è®°å½•
- `achievements` - æˆå°±å®šä¹‰
- `user_achievements` - ç”¨æˆ·æˆå°±

**ç›¸å…³æ–‡ä»¶**:
- `src/lib/supabase-schema-v2.sql`

#### æ³¨æ„äº‹é¡¹
- éœ€è¦åœ¨ Supabase ä¸­è¿è¡Œ `supabase-schema-v2.sql` æ‰èƒ½ä½¿ç”¨æ–°åŠŸèƒ½
- æ­¤åˆ†æ”¯ä¸ºå¼€å‘åˆ†æ”¯ `dev-major-update`ï¼Œå°šæœªåˆå¹¶åˆ° master

---

### 2026-01-23: éŸ³é«˜æ£€æµ‹å‡çº§ + åˆ†æ•°ä¿å­˜ä¿®å¤ + æ˜µç§°ç¼–è¾‘åŠŸèƒ½

#### æœ‰æ•ˆæ”¹åŠ¨

**1. éŸ³é«˜æ£€æµ‹ç®—æ³•å‡çº§ (YIN ç®—æ³•)**
- ä»ç®€å•è‡ªç›¸å…³å‡çº§ä¸º YIN ç®—æ³•ï¼Œç²¾åº¦æ›´é«˜
- FFT ç¼“å†²åŒºä» 2048 å¢åŠ åˆ° 4096
- æ·»åŠ ä¸­å€¼æ»¤æ³¢å™¨æ¶ˆé™¤æ£€æµ‹æŠ–åŠ¨
- ç¦ç”¨æµè§ˆå™¨è‡ªåŠ¨éŸ³é¢‘å¤„ç† (echoCancellation, noiseSuppression, autoGainControl)

**ç›¸å…³æ–‡ä»¶**:
- `src/utils/pitchDetection.ts` - YIN ç®—æ³•å®ç°
- `src/hooks/usePitchDetector.ts` - æ·»åŠ å¹³æ»‘å¤„ç†

**2. åˆ†æ•°ä¿å­˜é€»è¾‘ä¿®å¤**
- è·³è¿‡ score=0 çš„ä¿å­˜ï¼Œé¿å…åˆ›å»ºç©ºè®°å½•
- æ·»åŠ è¯¦ç»†çš„æ§åˆ¶å°æ—¥å¿— `[QuizMode]` / `[SingMode]`
- ä½¿ç”¨ `.select()` ç¡®è®¤æ›´æ–°æ“ä½œæˆåŠŸ
- æ­£ç¡®æ¯”è¾ƒæ–°åˆ†æ•°å’Œæ•°æ®åº“æœ€é«˜åˆ†

**ç›¸å…³æ–‡ä»¶**:
- `src/pages/QuizMode.tsx`
- `src/pages/SingMode.tsx`

**3. æ’è¡Œæ¦œå’Œç”¨æˆ·æˆç»©ä¿®å¤**
- ä½¿ç”¨ `.maybeSingle()` æ›¿ä»£ `.single()` é¿å… 406 é”™è¯¯
- æ·»åŠ  profiles æŸ¥è¯¢è·å–ç”¨æˆ·å
- ç®€åŒ–é”™è¯¯å¤„ç†ï¼Œé¿å…æŸ¥è¯¢å¡ä½

**ç›¸å…³æ–‡ä»¶**:
- `src/components/game/Leaderboard.tsx`
- `src/components/auth/UserButton.tsx`

**4. æ˜µç§°ç¼–è¾‘åŠŸèƒ½**
- åœ¨è®¾ç½®é¡µé¢æ·»åŠ æ˜µç§°ç¼–è¾‘åŠŸèƒ½
- æ˜µç§°ä¿å­˜åˆ° Supabase profiles è¡¨
- æ’è¡Œæ¦œæ˜¾ç¤ºç”¨æˆ·æ˜µç§°

**ç›¸å…³æ–‡ä»¶**:
- `src/components/auth/UserButton.tsx` - æ·»åŠ è®¾ç½®æ¨¡æ€æ¡†
- `src/store/useUserStore.ts` - æ·»åŠ  updateProfile å‡½æ•°

**5. Vercel SPA è·¯ç”±ä¿®å¤**
- æ·»åŠ  `vercel.json` é…ç½®æ–‡ä»¶
- æ‰€æœ‰è·¯ç”±é‡å†™åˆ° `index.html`

**ç›¸å…³æ–‡ä»¶**:
- `vercel.json`

#### è¸©å‘è®°å½• (è¡Œä¸é€šçš„æ–¹æ³•)

**1. æ’è¡Œæ¦œä½¿ç”¨ `.single()` æŸ¥è¯¢**
- âŒ é—®é¢˜ï¼šå½“æ²¡æœ‰åŒ¹é…è®°å½•æ—¶æŠ›å‡º 406 é”™è¯¯
- âœ… è§£å†³ï¼šæ”¹ç”¨ `.maybeSingle()`ï¼Œæ— è®°å½•æ—¶è¿”å› null

**2. åˆ†æ•°ä¿å­˜ä½¿ç”¨ upsert ç›´æ¥è¦†ç›–**
- âŒ é—®é¢˜ï¼šupsert ä¼šç”¨æ–°å€¼è¦†ç›–ï¼Œä¸ä¼šä¿ç•™æœ€é«˜åˆ†
- âœ… è§£å†³ï¼šå…ˆæŸ¥è¯¢ç°æœ‰è®°å½•ï¼Œæ¯”è¾ƒåå†æ›´æ–°

**3. æ’è¡Œæ¦œåŒæ—¶æŸ¥è¯¢ leaderboard + profiles è¡¨**
- âŒ é—®é¢˜ï¼šprofiles æŸ¥è¯¢å¯èƒ½å¡ä½å¯¼è‡´æ’è¡Œæ¦œæ— æ³•åŠ è½½
- âœ… è§£å†³ï¼šç”¨ try-catch åŒ…è£¹ profiles æŸ¥è¯¢ï¼Œå¤±è´¥æ—¶æ˜¾ç¤ºé»˜è®¤ç”¨æˆ·å

**4. éŸ³é«˜æ£€æµ‹ç®€å•è‡ªç›¸å…³ç®—æ³•**
- âŒ é—®é¢˜ï¼šå®¹æ˜“å—å™ªéŸ³å¹²æ‰°ï¼Œæ£€æµ‹ä¸ç¨³å®š
- âœ… è§£å†³ï¼šæ”¹ç”¨ YIN ç®—æ³• + ä¸­å€¼æ»¤æ³¢

**5. æµè§ˆå™¨éŸ³é¢‘è‡ªåŠ¨å¤„ç†**
- âŒ é—®é¢˜ï¼šechoCancellation/noiseSuppression ä¼šå¹²æ‰°éŸ³é«˜æ£€æµ‹
- âœ… è§£å†³ï¼šåœ¨ getUserMedia æ—¶æ˜¾å¼ç¦ç”¨è¿™äº›åŠŸèƒ½

---

### 2026-01-20: Supabase é›†æˆ (ç”¨æˆ·ç³»ç»Ÿ + æ’è¡Œæ¦œ + åˆ†äº«)
**æ–°å¢åŠŸèƒ½**:
- æ¸¸å®¢æ¨¡å¼ï¼šæ•°æ®å­˜å‚¨åœ¨æœ¬åœ° localStorage
- é‚®ç®±ç™»å½•/æ³¨å†Œï¼šä½¿ç”¨ Supabase Auth
- æ’è¡Œæ¦œç³»ç»Ÿï¼šå±•ç¤ºå…¨æœç©å®¶æœ€é«˜åˆ†
- åˆ†äº«åŠŸèƒ½ï¼šWeb Share API + å¤åˆ¶é“¾æ¥

**ç›¸å…³æ–‡ä»¶**:
- `src/lib/supabase.ts` - Supabase å®¢æˆ·ç«¯é…ç½®
- `src/lib/supabase-schema.sql` - æ•°æ®åº“è¡¨ç»“æ„
- `src/store/useUserStore.ts` - ç”¨æˆ·çŠ¶æ€ç®¡ç† (Zustand)
- `src/components/auth/AuthModal.tsx` - ç™»å½•/æ³¨å†Œå¼¹çª—
- `src/components/auth/UserButton.tsx` - ç”¨æˆ·æŒ‰é’®ç»„ä»¶
- `src/components/ui/ShareButton.tsx` - åˆ†äº«æŒ‰é’®
- `src/components/game/Leaderboard.tsx` - æ’è¡Œæ¦œç»„ä»¶

**Supabase é…ç½®**:
- Project ID: `xuxfmetjjfeaexwllpyd`
- æ•°æ®åº“è¡¨: `profiles`, `leaderboard`
- RLS ç­–ç•¥å·²å¯ç”¨

---

### 2026-01-20: ç§»åŠ¨ç«¯é€‚é…ä¼˜åŒ–
**å˜æ›´å†…å®¹**:
- æ‰€æœ‰é¡µé¢å“åº”å¼å¸ƒå±€ä¼˜åŒ– (Home, FreeMode, QuizMode, SingMode)
- é’¢ç´é”®ç›˜å“åº”å¼å°ºå¯¸ + æ¨ªå‘æ»šåŠ¨æ”¯æŒ
- ç¦ç”¨é¡µé¢ç¼©æ”¾ï¼Œæ·»åŠ  PWA meta æ ‡ç­¾
- æ·»åŠ  safe-area é€‚é…åˆ˜æµ·å±
- éšè—æ»šåŠ¨æ¡å·¥å…·ç±» `.hide-scrollbar`

**ç›¸å…³æ–‡ä»¶**:
- `src/pages/*.tsx` - æ‰€æœ‰é¡µé¢
- `src/components/game/PianoKeyboard.tsx`
- `src/index.css`
- `index.html`

---

### 2026-01-20: é’¢ç´éŸ³è‰²ä¼˜åŒ–
**é—®é¢˜**: åˆæˆéŸ³è‰²ç”µå­æ„Ÿå¤ªé‡  
**è§£å†³æ–¹æ¡ˆ**: æ”¹ç”¨ Salamander Grand Piano é‡‡æ · (CDN åŠ è½½)

**ç›¸å…³æ–‡ä»¶**:
- `src/hooks/useAudioPlayer.ts`

**æŠ€æœ¯ç»†èŠ‚**:
```typescript
// é‡‡æ · CDN åœ°å€
const SAMPLE_BASE_URL = 'https://cdn.jsdelivr.net/gh/surikov/webaudio-tinysynth@gh-pages/sounds/salamander/';
// é¢„åŠ è½½ C3-C6 èŒƒå›´çš„éŸ³ç¬¦
// åŠ è½½å¤±è´¥æ—¶å›é€€åˆ° sine æ³¢å½¢
```

---

### 2026-01-20: éŸ³é«˜å¯è§†åŒ–å™¨ä¿®å¤
**é—®é¢˜**: 
1. å¯è§†åŒ–å™¨ä¸‹æ–¹å‡ºç°é»‘è‰²ç©ºç™½åŒºåŸŸ
2. è§†å›¾éšç”¨æˆ·éŸ³é«˜æµ®åŠ¨ï¼Œè§†è§‰æ··ä¹±
3. å¯è§éŸ³ç¬¦èŒƒå›´ä¸å¤Ÿ (C5 ä¸å¤Ÿï¼Œéœ€è¦åˆ° G5)

**è§£å†³æ–¹æ¡ˆ**:
- `NOTE_HEIGHT` è®¾ä¸º 15px (æ¯åŠéŸ³)
- `centerMidi` å›ºå®šä¸º 64 (E4)ï¼Œä¸å†è·Ÿéšç”¨æˆ·éŸ³é«˜
- `visibleSemitones` ç¼“å†²åŒºå¢åŠ åˆ° +48
- Canvas ä½¿ç”¨ `position: absolute; inset: 0` å¡«æ»¡å®¹å™¨

**ç›¸å…³æ–‡ä»¶**:
- `src/components/game/PitchVisualizer.tsx`

---

### 2026-01-20: å“¼å”±é—¯å…³ (SingMode) å®ç°
**åŠŸèƒ½**:
- éšæœºç”Ÿæˆç›®æ ‡éŸ³é«˜ (F3-C5)
- å®æ—¶éŸ³é«˜æ£€æµ‹åŒ¹é…
- è¿›åº¦æ¡ (éœ€ä¿æŒ 1.5 ç§’å®ŒæˆåŒ¹é…)
- æˆåŠŸåæ’­æ”¾å’Œå¼¦ + æ’’èŠ±ç‰¹æ•ˆ
- å…³å¡é€’è¿›

**ç›¸å…³æ–‡ä»¶**:
- `src/pages/SingMode.tsx`

---

### åˆå§‹åŠŸèƒ½
**é¦–é¡µ (Home)**:
- ä¸‰ç§æ¨¡å¼å¡ç‰‡å…¥å£
- Neo-Brutalism è®¾è®¡é£æ ¼

**è‡ªç”±ç»ƒä¹  (FreeMode)**:
- å®æ—¶éŸ³é«˜æ£€æµ‹ + å¯è§†åŒ–
- æ˜¾ç¤ºå½“å‰éŸ³é«˜ã€éŸ³åˆ†åå·®

**å¬éŸ³è¾¨ä½ (QuizMode)**:
- æ’­æ”¾éšæœºéŸ³ç¬¦
- ç”¨æˆ·ç‚¹å‡»é’¢ç´é”®çŒœæµ‹
- å¾—åˆ† + è¿å‡»ç³»ç»Ÿ

---

## é¡¹ç›®æ–‡ä»¶ç»“æ„
```
src/
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ auth/
â”‚   â”‚   â”œâ”€â”€ AuthModal.tsx          # ç™»å½•/æ³¨å†Œå¼¹çª—
â”‚   â”‚   â”œâ”€â”€ UserButton.tsx         # ç”¨æˆ·æŒ‰é’®
â”‚   â”‚   â”œâ”€â”€ UserStatsModal.tsx     # ç”¨æˆ·æˆç»©å¼¹çª—
â”‚   â”‚   â””â”€â”€ UserSettingsModal.tsx  # ç”¨æˆ·è®¾ç½®å¼¹çª—
â”‚   â”œâ”€â”€ game/
â”‚   â”‚   â”œâ”€â”€ Leaderboard.tsx        # æ’è¡Œæ¦œå¼¹çª—
â”‚   â”‚   â”œâ”€â”€ PianoKeyboard.tsx      # é’¢ç´é”®ç›˜ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ PitchVisualizer.tsx    # éŸ³é«˜å¯è§†åŒ–å™¨
â”‚   â”‚   â””â”€â”€ XPBar.tsx              # XP è¿›åº¦æ¡ (v2.0)
â”‚   â”œâ”€â”€ layout/
â”‚   â”‚   â””â”€â”€ TabLayout.tsx          # Tab å¯¼èˆªå¸ƒå±€ (v2.0)
â”‚   â””â”€â”€ ui/
â”‚       â”œâ”€â”€ Button.tsx             # é€šç”¨æŒ‰é’®
â”‚       â”œâ”€â”€ Card.tsx               # é€šç”¨å¡ç‰‡
â”‚       â””â”€â”€ ShareButton.tsx        # åˆ†äº«æŒ‰é’®
â”œâ”€â”€ hooks/
â”‚   â”œâ”€â”€ useAudioPlayer.ts          # éŸ³é¢‘æ’­æ”¾ (é’¢ç´é‡‡æ ·)
â”‚   â”œâ”€â”€ usePitchDetector.ts        # éŸ³é«˜æ£€æµ‹
â”‚   â””â”€â”€ useAudioContext.ts         # AudioContext ç®¡ç†
â”œâ”€â”€ lib/
â”‚   â”œâ”€â”€ supabase.ts                # Supabase å®¢æˆ·ç«¯
â”‚   â”œâ”€â”€ supabase-schema.sql        # æ•°æ®åº“ Schema (v1.0)
â”‚   â””â”€â”€ supabase-schema-v2.sql     # æ•°æ®åº“æ‰©å±• Schema (v2.0)
â”œâ”€â”€ pages/
â”‚   â”œâ”€â”€ Home.tsx                   # é¦–é¡µ (æ—§ç‰ˆ)
â”‚   â”œâ”€â”€ FreeMode.tsx               # è‡ªç”±ç»ƒä¹ 
â”‚   â”œâ”€â”€ QuizMode.tsx               # å¬éŸ³è¾¨ä½
â”‚   â”œâ”€â”€ SingMode.tsx               # å“¼å”±é—¯å…³
â”‚   â”œâ”€â”€ Learn.tsx                  # å­¦ä¹ ä¸­å¿ƒ (v2.0)
â”‚   â”œâ”€â”€ Practice.tsx               # ç»ƒä¹ åœº (v2.0)
â”‚   â”œâ”€â”€ Compete.tsx                # ç«æŠ€åœº (v2.0)
â”‚   â”œâ”€â”€ Profile.tsx                # ä¸ªäººä¸­å¿ƒ (v2.0)
â”‚   â”œâ”€â”€ SkillDetail.tsx            # æŠ€èƒ½è¯¦æƒ… (v2.0)
â”‚   â””â”€â”€ LessonPage.tsx             # è¯¾ç¨‹å­¦ä¹ é¡µ (v2.0)
â”œâ”€â”€ store/
â”‚   â”œâ”€â”€ useGameStore.ts            # æ¸¸æˆçŠ¶æ€ç®¡ç†
â”‚   â””â”€â”€ useUserStore.ts            # ç”¨æˆ·çŠ¶æ€ç®¡ç†
â”œâ”€â”€ utils/
â”‚   â”œâ”€â”€ musicTheory.ts             # éŸ³ä¹ç†è®ºå·¥å…·å‡½æ•°
â”‚   â””â”€â”€ pitchDetection.ts          # éŸ³é«˜æ£€æµ‹ç®—æ³•
â”œâ”€â”€ App.tsx                        # è·¯ç”±é…ç½®
â”œâ”€â”€ main.tsx                       # å…¥å£æ–‡ä»¶
â””â”€â”€ index.css                      # å…¨å±€æ ·å¼
```

---

## é‡è¦æŠ€æœ¯å†³ç­–

### 1. éŸ³é«˜æ£€æµ‹
ä½¿ç”¨ `pitchfinder` åº“çš„ YIN ç®—æ³•ï¼Œç²¾åº¦çº¦ Â±10 éŸ³åˆ†ã€‚
```typescript
// usePitchDetector.ts
const detector = Pitchfinder.YIN({ sampleRate });
```

### 2. éŸ³é¢‘æ’­æ”¾
- å…¨å±€å•ä¾‹ `AudioContext` é¿å…é‡å¤åˆ›å»º
- æ’­æ”¾å‰è°ƒç”¨ `audioContext.resume()` å¤„ç†æµè§ˆå™¨è‡ªåŠ¨æ’­æ”¾ç­–ç•¥
- åœæ­¢å½“å‰éŸ³é¢‘å†æ’­æ”¾æ–°éŸ³é¢‘ï¼Œé¿å…é‡å 

### 3. Canvas å¯è§†åŒ–
- ä½¿ç”¨ `requestAnimationFrame` å®ç° 60fps åŠ¨ç”»
- éŸ³é«˜å†å²å­˜å‚¨åœ¨ `historyRef` ä¸­ï¼Œç»˜åˆ¶è½¨è¿¹çº¿
- åŠ¨æ€æ¸²æŸ“éŸ³ç¬¦ç½‘æ ¼çº¿

### 4. æ ·å¼ç³»ç»Ÿ
Tailwind CSS è‡ªå®šä¹‰é…ç½®:
```javascript
// tailwind.config.js
colors: {
  primary: '#7F5AF0',    // ç´«è‰²
  secondary: '#2CB67D',  // ç»¿è‰²
  accent: '#FF8906',     // æ©™è‰²
  dark: '#16161a',       // æ·±è‰²
  'light-bg': '#FFFFFE', // èƒŒæ™¯è‰²
}
```

---

## å·²çŸ¥é—®é¢˜ & å¾…ä¼˜åŒ–

1. **éŸ³é¢‘å»¶è¿Ÿ**: é¦–æ¬¡æ’­æ”¾é‡‡æ ·å¯èƒ½æœ‰åŠ è½½å»¶è¿Ÿ (å·²é€šè¿‡é¢„åŠ è½½ç¼“è§£)
2. **ä½ç«¯è®¾å¤‡**: Canvas åŠ¨ç”»å¯èƒ½åœ¨ä½ç«¯æ‰‹æœºä¸Šå¡é¡¿
3. **æµè§ˆå™¨å…¼å®¹**: éœ€è¦æ”¯æŒ Web Audio API çš„ç°ä»£æµè§ˆå™¨

---

## éƒ¨ç½²ä¿¡æ¯

**Git åˆ†æ”¯**: master  
**è‡ªåŠ¨éƒ¨ç½²**: GitHub æ¨é€å Vercel è‡ªåŠ¨æ„å»º  
**æ„å»ºå‘½ä»¤**: `npm run build`  
**è¾“å‡ºç›®å½•**: `dist/`

---

*æœ€åæ›´æ–°: 2026-01-23 (Phase 1 å®Œæˆ)*
