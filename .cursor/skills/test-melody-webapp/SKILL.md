---
name: test-melody-webapp
description: 测试 Melody Challenger 网站的所有功能模块。使用浏览器自动化工具进行 UI 测试，验证页面加载、用户登录、学习系统、练习模块、竞技模块、复习中心、成就系统等功能是否正常。当用户要求测试网站功能、进行功能验收、或检查网站是否正常工作时使用此技能。
---

# Melody Challenger 网站功能测试

## 测试账号

```
邮箱: 782139616@qq.com
密码: xu960227
```

## 测试前准备

1. **启动开发服务器**
   ```bash
   npm run dev
   ```
   确认服务器运行在 `http://localhost:5173/`

2. **构建测试**
   ```bash
   npm run build
   ```
   确保无 TypeScript 错误

3. **连接浏览器 MCP**
   - 打开浏览器访问 http://localhost:5173/
   - 点击浏览器工具栏中的 Browser MCP 扩展图标
   - 点击 "Connect" 按钮连接当前标签页

## 测试流程

### 1. 首页加载测试
- 导航到 `/learn`
- 验证学习中心页面正常显示
- 检查 XP 进度条、技能树列表

### 2. 用户登录测试
- 导航到 `/profile`
- 如未登录，点击登录按钮
- 输入测试账号密码
- 验证登录后显示用户等级和 XP

### 3. 学习中心测试
| 路由 | 测试项 |
|------|--------|
| `/learn` | 技能树显示、基础篇/进阶篇分类 |
| `/learn/skill/{skillId}` | 技能详情、课程列表、进度显示 |
| `/lesson/{lessonId}` | 课程页面、题目、选项、答题流程 |

### 4. 练习模块测试
| 路由 | 功能 | 测试重点 |
|------|------|---------|
| `/practice` | 练习场入口 | 三种模式卡片 |
| `/free` | 自由哼唱 | 录音回放、目标音辅助线 |
| `/quiz` | 听音辨位 | 钢琴键盘、音符播放 |
| `/sing` | 哼唱闯关 | 道具系统（跳过/提示/重置） |

### 5. 竞技模块测试
| 路由 | 测试项 |
|------|--------|
| `/compete` | 每日挑战入口、排行榜入口 |
| `/daily-challenge` | 每日挑战页面 |

### 6. 复习中心测试
| 路由 | 测试项 |
|------|--------|
| `/review` | 待复习列表、统计卡片、开始复习按钮 |

### 7. 成就系统测试
| 路由 | 测试项 |
|------|--------|
| `/achievements` | 成就列表、进度、分类显示 |

### 8. 个人中心测试
| 路由 | 测试项 |
|------|--------|
| `/profile` | 用户信息、等级、统计数据、设置 |

## 浏览器 MCP 工具使用

### 导航页面
```json
{"tool": "browser_navigate", "arguments": {"url": "http://localhost:5173/learn"}}
```

### 获取页面快照
```json
{"tool": "browser_snapshot", "arguments": {}}
```

### 点击元素
```json
{"tool": "browser_click", "arguments": {"element": "描述", "ref": "s1eXX"}}
```

### 输入文本
```json
{"tool": "browser_type", "arguments": {"element": "描述", "ref": "s1eXX", "text": "内容", "submit": false}}
```

### 等待加载
```json
{"tool": "browser_wait", "arguments": {"time": 2}}
```

## 测试结果模板

```markdown
## 功能测试报告

### 构建测试
| 项目 | 状态 |
|------|------|
| npm run build | ✅/❌ |

### 功能模块测试
| 模块 | 测试项 | 状态 | 说明 |
|------|--------|------|------|
| 首页 | 页面加载 | ✅/❌ | |
| 用户系统 | 登录状态 | ✅/❌ | |
| 学习中心 | 技能树 | ✅/❌ | |
| 练习模块 | 自由哼唱 | ✅/❌ | |
| 竞技模块 | 每日挑战 | ✅/❌ | |
| 复习中心 | 复习列表 | ✅/❌ | |
| 成就系统 | 成就页面 | ✅/❌ | |
| 个人中心 | 用户信息 | ✅/❌ | |
```

## 常见问题

### 浏览器 MCP 未连接
错误信息：`No connection to browser extension`
解决方案：在浏览器中点击 Browser MCP 扩展图标，点击 Connect 连接当前标签页

### 构建失败
1. 查看错误信息，通常是 TypeScript 类型错误
2. 常见问题：
   - 未使用的变量/导入 → 删除或添加 `void` 使用
   - 缺少类型定义 → 添加到接口定义中

### 麦克风权限
音频相关功能（自由哼唱、哼唱闯关）需要浏览器麦克风权限，点击开始后会弹出权限请求
